define(['jquery','Amasty_Label/js/label','domReady!'],function($){$.widget('mage.amInitLabel',{options:{mode:null,isAdminArea:null,config:null,productId:null,selector:null,},_create:function(){var self=this,element=self.element.closest('.product-item, .item');if(self.options.mode==='prod'||self.options.isAdminArea||self.element.hasClass('amlabel-swatch')||self.isIE()){self.execLabel();}else if(self.options.mode==='cat'&&element.length&&!self.element.hasClass('amlabel-swatch')){self._handleIntersect(element);}else{self.execLabel();}},execLabel:function(){this.element.amShowLabel(this.options.config);},isIE:function(){var ua=window.navigator.userAgent;return ua.indexOf("MSIE ")>-1||ua.indexOf("Trident/")>-1;},_handleIntersect:function(element){var self=this,observer;observer=new IntersectionObserver(function(entries){if(entries[0].isIntersecting){self.execLabel();observer.disconnect();}});observer.observe(element[0]);}});return $.mage.amInitLabel;});
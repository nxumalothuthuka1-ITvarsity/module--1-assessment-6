!function(){function a(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c}return"function"!=typeof window.CustomEvent&&(a.prototype=window.Event.prototype,void(window.CustomEvent=a))}(),"object"!=typeof _rmData&&(_rmData=[]),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),"object"!=typeof window.Remarkety&&(window.Remarkety=function(){function a(){function a(){return!(!l.hasOwnProperty("email")||null===l.email)||(!(!l.hasOwnProperty("id")||null===l.id)||!(!l.hasOwnProperty("trackingId")||null===l.trackingId))}function b(){return!!o||(!navigator||!navigator.doNotTrack)&&(!window||!window.doNotTrack)}function d(d,e,g){if(!b())return void console.debug("doNotTrack is enabled");if(n&&!a())return void y.push([d,e,g]);var h="events";"identify"===d&&(h="identify");var i=new CustomEvent("firstEventResponse"),j=m+"/"+h+".json",k={};e=e||{},Array.isArray(e)&&(console.log("Event data must be an object"),e={}),k.customer=l,k.action=d,k.properties=e,k.properties.pageUrl=window.location.href,k.properties.pageTitle=document.title||"";var o=function(){f(j,function(a,b){try{"string"==typeof a&&(a=JSON.parse(a))}catch(d){window.console&&console.log("Could not parse response from server")}"object"==typeof a&&a.hasOwnProperty("identityGUID")&&(l.identityGUID=a.identityGUID,c(q,l,30)),w&&(w=!1,window.dispatchEvent(i)),"function"==typeof g&&g(a,b)},k)};return x||!w?(x=!1,o()):window.addEventListener("firstEventResponse",o,!1),!0}function e(a){return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(a,b){return String.fromCharCode("0x"+b)}))}function f(a,b,c,d,f){try{var d=new(this.XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");return d.open(c?"POST":"GET",a,1),d.setRequestHeader("Content-type","text/plain"),d.setRequestHeader("x-rm-store",k),d.responseType="json","withCredentials"in d&&(d.withCredentials=!0),d.onreadystatechange=function(){d.readyState>3&&200===d.status&&"function"==typeof b?b(d.response,d):d.readyState>3&&200!==d.status&&"function"==typeof f&&f(d.response,d)},c=e(JSON.stringify(c)),d.send(c),!0}catch(g){return window.console&&console.log(g),!1}}function h(){if(!a())return!1;if(y&&y.length>0)for(var b;b=y.shift();)b&&d.apply(null,b);return!0}var i=function(a,b){b="undefined"==typeof b||b;var e=null,f=null,g=null;"object"==typeof a?(a.hasOwnProperty("email")&&(e=a.email),a.hasOwnProperty("id")&&(f=a.id),a.hasOwnProperty("trackingId")&&(g=a.trackingId)):""!==a&&(e=a,a={email:e});var i=!1;return l.email!==e&&null!==e&&(i=!0,l.email=e),l.trackingId!==g&&null!==g&&(i=!0,l.trackingId=g),l.id!==f&&null!==f&&(i=!0,l.id=f),i&&(c(q,l,30),b&&d("identify",a),h()),!0};return{setStoreKey:function(a){k=a},setCustomer:i,setCustomerEmail:function(a){return i({email:a})},setCustomerId:function(a){return"undefined"!=typeof a&&null!==a&&("string"==typeof a&&(a=a.trim()),0!==a.length&&i({id:a}))},productView:function(a){return g(a.productId)?(window.console&&console.log("Missing productId"),!1):d("productView",a)},pageView:function(){return d("pageView")},track:function(a,b){return d(a,b)},allowNonIdentifiedEvents:function(a){n=!a},ignoreDoNotTrackSetting:function(a){o=a},setCookieDomain:function(a){u=a},setCookiePath:function(a){v=a}}}function b(a,b){b=b||v,a=p+a,expiryDate=new Date,expiryDate.setTime(expiryDate.getTime()+-864e5),document.cookie=a+"=0;expires="+expiryDate.toGMTString()+";path="+(b||"/")+(u?";domain="+u:"")}function c(a,c,d){v&&b(a,"/");var e;a=p+a,d&&(e=new Date,e.setTime(e.getTime()+864e5*d)),c=window.btoa(JSON.stringify(c)),document.cookie=a+"="+s(c)+(d?";expires="+e.toGMTString():"")+";path="+(v||"/")+(u?";domain="+u:"")}function d(a){a=p+a;var b=new RegExp("(^|;)[ ]*"+a+"=([^;]*)"),c=b.exec(document.cookie),d=c?JSON.parse(window.atob(t(c[2]))):0;return d}function e(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}function f(a){return"string"==typeof a||a instanceof String}function g(a){return void 0===a||"object"==typeof a&&0===Object.keys(a).length&&JSON.stringify(a)===JSON.stringify({})}function h(){var a,b,c;for(a=0;a<arguments.length;a+=1)c=arguments[a],b=c.shift(),f(b)?"function"==typeof z[b]?z[b].apply(z,c):window.console&&console.log("Invalid tracker function: "+b):b.apply(z,c)}function i(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=0;d<_rmData.length;d++)if(_rmData[d]&&_rmData[d][0]){var e=_rmData[d][0];c===e&&(h(_rmData[d]),delete _rmData[d])}}function j(){return{push:h}}var k=null,l={email:null,identityGUID:null,trackingId:null,id:null},m="https://webhooks.remarkety.com/api/v1",n=!0,o=!1,p="_rm_",q="sessionId",r="_rmId",s=window.encodeURIComponent,t=window.decodeURIComponent,u=!1,v=!1,w=!0,x=!0,y=[],z=new a,A=d(q);"object"==typeof A&&(A.email&&(l.email=A.email),A.identityGUID&&(l.identityGUID=A.identityGUID,w=!1),A.trackingId&&(l.trackingId=A.trackingId),A.hasOwnProperty("id")&&A.id&&(l.id=A.id));var B=["setStoreKey","setCustomer"];i(B);var C=e(r);if(null!==C&&""!==C){var D=JSON.parse(JSON.stringify(l));D.trackingId=C,z.setCustomer(D)}for(var E=0;E<_rmData.length;E++)_rmData[E]&&h(_rmData[E]);_rmData=new j;var F=setInterval(function(){"complete"===document.readyState&&(clearInterval(F),_rmData.push(["pageView"]))},100);return{}}());